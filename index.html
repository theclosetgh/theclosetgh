<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>THE CLOSET</title>

<meta name="description" content="THE CLOSET GH â€” quality tops and streetwear. Shop new arrivals and order via WhatsApp.">
<link rel="canonical" href="https://www.theclosetgh.com/">

<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:Arial,sans-serif;background:#f8f8f8;color:#333}

  /* Header */
  header{background:#000;color:#fff;padding:20px 0;text-align:center;position:sticky;top:0;z-index:1000}
  header h1{letter-spacing:3px;font-size:2rem}
  nav a{color:#fff;text-decoration:none;margin:0 15px;font-weight:bold}
  nav a:hover{color:#ff4081}

  /* Hero */
  .hero{width:100%;height:100vh;background:url('home.jpg') no-repeat center center/cover;display:flex;align-items:center;justify-content:center;position:relative;text-align:center;color:#fff}
  .hero::after{content:'';position:absolute;inset:0;background:rgba(0,0,0,.5)}
  .hero-content{position:relative;z-index:2;padding:0 14px}
  .hero h2{font-size:3rem;margin-bottom:20px}
  .hero button{background:#ff4081;border:none;color:#fff;padding:15px 30px;font-size:1.2rem;cursor:pointer;border-radius:10px}
  .hero button:hover{opacity:.92}

  /* Sections */
  section{padding:50px 20px;max-width:1200px;margin:auto}
  section h2{text-align:center;margin-bottom:16px}
  .hint{max-width:760px;margin:0 auto 22px auto;text-align:center;color:#666}

  /* Products */
  .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px}
  .product{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.1);padding-bottom:15px;transition:transform .3s;position:relative}
  .product:hover{transform:translateY(-5px)}
  .product img{width:100%;height:300px;object-fit:contain;background:#fff}
  .product-content{padding:15px;text-align:center}
  .product-content h3{margin-bottom:5px}
  .product-content p{font-size:.95rem;color:#666}

  .badge-top{position:absolute;top:12px;left:12px;background:#111;color:#fff;font-weight:bold;padding:6px 10px;border-radius:999px;font-size:.85rem}
  .badge-top.out{background:#b00020}

  .price{margin:10px 0;display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap}
  .price .old{color:#999;text-decoration:line-through;font-weight:bold}
  .price .new{color:#ff4081;font-weight:bold}
  .price .disc{background:#ff4081;color:#fff;font-weight:bold;padding:4px 8px;border-radius:999px;font-size:.85rem}

  .order-btn{display:inline-block;margin-top:10px;background:#25D366;color:#fff;padding:10px 20px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;transition:background .3s}
  .order-btn:hover{background:#128C7E}
  .order-btn.disabled{background:#cfcfcf;color:#666;pointer-events:none;cursor:not-allowed}

  label{display:block;margin-top:10px;font-weight:bold}
  select,input[type="number"]{margin-top:5px;padding:8px;width:85%;border:1px solid #ddd;border-radius:8px}

  /* Contact */
  .contact{text-align:center;background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.05)}
  .contact a{display:block;margin-top:10px;text-decoration:none;color:#000;font-weight:bold}
  .contact a:hover{text-decoration:underline}

  /* Footer */
  footer{background:#000;color:#fff;text-align:center;padding:20px;margin-top:40px}

  /* Responsive */
  @media (max-width:768px){
    .hero h2{font-size:2rem}
    .products{grid-template-columns:repeat(2,1fr)}
  }
  @media (max-width:480px){
    .products{grid-template-columns:1fr}
  }

  /* Modal */
  #orderModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999;align-items:center;justify-content:center;padding:18px}
  #orderBox{background:#fff;padding:18px;border-radius:12px;max-width:420px;width:100%}
  #orderBox h3{margin-bottom:10px}
  #orderBox input,#orderBox select{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:8px}
  #sendOrder{width:100%;background:#25D366;color:#fff;padding:12px;border:none;border-radius:8px;margin-top:12px;font-weight:bold;cursor:pointer}
  #cancelOrder{width:100%;padding:10px;margin-top:8px;border:1px solid #ddd;border-radius:8px;cursor:pointer;background:#fff}
  .smallNote{font-size:.9rem;color:#666;margin-top:8px}
</style>
</head>

<body>
<header>
  <h1>THE CLOSET</h1>
  <nav>
    <a href="#home">HOME</a>
    <a href="#shop">SHOP</a>
    <a href="#contact">CONTACT</a>
  </nav>
</header>

<section id="home" class="hero">
  <div class="hero-content">
    <h2>Welcome to THE CLOSET</h2>
    <button onclick="document.getElementById('shop').scrollIntoView({behavior:'smooth'})">Shop Now</button>
  </div>
</section>

<section id="shop">
  <h2>Available Dresses</h2>
  <p class="hint">All items are online â€” everyone sees the same stock.</p>
  <div class="products" id="productsGrid"></div>
</section>

<section id="contact">
  <h2>Contact</h2>
  <div class="contact">
    <a href="https://wa.me/233503674353" target="_blank">ðŸ“± WhatsApp: 0503674353</a>
    <a href="https://www.tiktok.com/@the.closetgh" target="_blank">ðŸŽµ TikTok: @theclosetgh</a>
  </div>
</section>

<footer>
  <p>Â© 2026 THE CLOSET</p>
</footer>

<!-- ORDER MODAL -->
<div id="orderModal">
  <div id="orderBox">
    <h3>Complete your order</h3>

    <div class="smallNote" id="orderItemLine"></div>

    <label style="margin-top:10px;">Name</label>
    <input id="custName" placeholder="Your name">

    <label style="margin-top:10px;">Location / Hostel</label>
    <input id="custLocation" placeholder="Eg. UPSA Hostel / Madina">

    <label style="margin-top:10px;">Delivery</label>
    <select id="custDelivery">
      <option>Pickup</option>
      <option>Delivery</option>
    </select>

    <button id="sendOrder">Send on WhatsApp</button>
    <button id="cancelOrder" type="button">Cancel</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCcEqZ9Mga_JcVSAeQv1DKNLlo0QCItYI0",
    authDomain: "the-closet-ee4ef.firebaseapp.com",
    projectId: "the-closet-ee4ef",
    messagingSenderId: "386905202760",
    appId: "1:386905202760:web:efe9e882049ce7ad31f87d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const WHATSAPP_NUMBER = "233503674353";
  const DISCOUNT_PERCENT = 15;

  const grid = document.getElementById("productsGrid");

  function money(n){ return `GHC ${Math.round(Number(n||0))}`; }
  function discounted(p){ return Number(p) * (100 - DISCOUNT_PERCENT) / 100; }

  // Modal state
  const orderModal = document.getElementById("orderModal");
  const orderItemLine = document.getElementById("orderItemLine");
  const custName = document.getElementById("custName");
  const custLocation = document.getElementById("custLocation");
  const custDelivery = document.getElementById("custDelivery");
  const sendOrder = document.getElementById("sendOrder");
  const cancelOrder = document.getElementById("cancelOrder");

  let currentOrder = null;

  function openOrder(order){
    currentOrder = order;
    orderItemLine.textContent =
      `${order.name} â€¢ Size: ${order.size} â€¢ Qty: ${order.qty} â€¢ ${order.priceText}`;
    orderModal.style.display = "flex";
  }

  function closeOrder(){
    orderModal.style.display = "none";
  }

  cancelOrder.addEventListener("click", closeOrder);
  orderModal.addEventListener("click", (e)=>{
    if(e.target === orderModal) closeOrder();
  });

  sendOrder.addEventListener("click", ()=>{
    const n = custName.value.trim();
    const l = custLocation.value.trim();
    const d = custDelivery.value;

    if(!currentOrder){ alert("No item selected."); return; }
    if(!n || !l){ alert("Please fill Name and Location/Hostel."); return; }

    const msg =
`Hello THE CLOSET ðŸ‘‹
Order details:
Name: ${n}
Location/Hostel: ${l}
Delivery: ${d}

Item: ${currentOrder.name}
Size: ${currentOrder.size}
Quantity: ${currentOrder.qty}
Price: ${currentOrder.priceText}

Please confirm availability.`;

    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, "_blank");
    closeOrder();
  });

  function cardHTML(p){
    const sizes = Array.isArray(p.sizes)&&p.sizes.length ? p.sizes : ["M","L","XL"];
    const base = Number(p.price||0);
    const out = !!p.outOfStock;
    const discOn = !!p.discountEnabled;
    const final = discOn ? discounted(base) : base;

    const badge = out
      ? `<div class="badge-top out">OUT OF STOCK</div>`
      : (discOn ? `<div class="badge-top">DISCOUNT</div>` : "");

    const priceHTML = discOn
      ? `<span class="old">${money(base)}</span><span class="new">${money(final)}</span><span class="disc">${DISCOUNT_PERCENT}% OFF</span>`
      : `<span class="new">${money(base)}</span>`;

    const opts = sizes.map(s=>`<option value="${s}">${s}</option>`).join("");

    return `
      <div class="product" data-base="${base}" data-disc="${discOn?1:0}" data-out="${out?1:0}">
        ${badge}
        <img src="${p.imageUrl || 'home.jpg'}" alt="${p.name || 'Product'}">
        <div class="product-content">
          <h3>${p.name || "New Item"}</h3>
          <p>${sizes.join("/")}</p>
          <div class="price">${priceHTML}</div>

          <label>Size:</label>
          <select class="size" ${out?"disabled":""}>${opts}</select>

          <label>Quantity:</label>
          <input type="number" class="quantity" min="1" max="10" value="1" ${out?"disabled":""}>

          <button class="order-btn ${out?"disabled":""}" type="button">
            ${out ? "Out of Stock" : "Order Now"}
          </button>
        </div>
      </div>
    `;
  }

  function wireOrders(){
    document.querySelectorAll(".product").forEach(card=>{
      const out = card.dataset.out === "1";
      if(out) return;

      const name = card.querySelector("h3").innerText.trim();
      const sizeEl = card.querySelector(".size");
      const qtyEl = card.querySelector(".quantity");
      const btn = card.querySelector(".order-btn");

      const base = Number(card.dataset.base||0);
      const discOn = card.dataset.disc === "1";
      const final = discOn ? discounted(base) : base;
      const priceText = discOn ? `${money(final)} (${DISCOUNT_PERCENT}% OFF)` : `${money(final)}`;

      btn.addEventListener("click", ()=>{
        openOrder({
          name,
          size: sizeEl.value,
          qty: qtyEl.value,
          priceText
        });
      });
    });
  }

  const q = query(collection(db,"products"), orderBy("createdAt","desc"));
  onSnapshot(q,(snap)=>{
    if(snap.empty){
      grid.innerHTML = `<p style="grid-column:1/-1;text-align:center;color:#666;">No products yet.</p>`;
      return;
    }
    grid.innerHTML = snap.docs.map(d=>cardHTML(d.data())).join("");
    wireOrders();
  });
</script>
</body>
</html>
